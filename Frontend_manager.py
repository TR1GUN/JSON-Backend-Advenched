# здесь расположим работу с фронтендом

# # Основные файлы которые не изменяються
handlers_static_file = {

    # "http.js": "http.js",
    # Файл иконки
    "favicon.ico": "favicon.ico",
}

handlers_javascript_file = {

    "http.js": "http.js",
    # Файл иконки
    # "favicon.ico": "favicon.ico",
}

handlers_frontend = {

    # # Основные файлы которые не изменяються
    # "http.js": "http.js",
    # # Файл иконки
    # "favicon.ico": "favicon.ico",

    #  Страницы - url
    "meter_arch_month_cons": "meter_arch_month_cons.html",
    "meter_answ_jrnl": "meter_answ_jrnl.html",
    "meter_arch_day_cons": "meter_arch_day_cons.html",
    "meter_settings_routing": "meter_settings_routing.html",
    "meter_arch_hour": "meter_arch_hour.html",
    "sim_settings": "sim_settings.html",
    "time_settings": "time_settings.html",
    "charge_station_state": "charge_station_state.html",
    "meter_jrnl_din": "meter_jrnl_din.html",
    "meter_arch_month": "meter_arch_month.html",
    "meter_arch_energy": "meter_arch_energy.html",
    "dout_state": "dout_state.html",
    "meter_arch_day": "meter_arch_day.html",
    "meter_table": "meter_table.html",
    "meter_action_table": "meter_action_table.html",
    "meter_moment_energy": "meter_moment_energy.html",
    "meter_arch_din": "meter_arch_din.html",
    "http_srv_settings": "http_srv_settings.html",
    "meter_moment_quality": "meter_moment_quality.html",
    "time_jrnl": "time_jrnl.html",
    "charge_session_state": "charge_session_state.html",
    "meter_arch_cons": "meter_arch_cons.html",
    "mqtt_srv_settings": "mqtt_srv_settings.html",
    "event_manager_settings": "event_manager_settings.html",
    "arch_template": "arch_template.html",
    "time": "time.html",
    "sntp_settings": "sntp_settings.html",
    "meter_arch_quality": "meter_arch_quality.html",
    "meter_moment_din": "meter_moment_din.html",
    "charge_process_state": "charge_process_state.html",
    "time_info_routing": "time_info_routing.html",
    "meter_moment_relay": "meter_moment_relay.html",
    "meter_arch_journal": "meter_arch_journal.html",
    "meter_template": "meter_template.html",
    "main": "main.html",
    "charge_station_table": "charge_station_table.html",
    "modem_routing": "modem_routing.html",
    "ip_settings": "ip_settings.html",
    "meter_data_routing": "meter_data_routing.html",
    "schdl_event_table": "schdl_event_table.html",
    "os_diagn": "os_diagn.html",
    "sync_actions_settings": "sync_actions_settings.html",
    "message_routing": "message_routing.html",
    "charge_station_routing": "charge_station_routing.html",
    "net_routing": "net_routing.html",
    "mqtt_routing": "mqtt_routing.html",
    "uart_settings": "uart_settings.html",
    "meter_arch_config": "meter_arch_config.html",
    "meter_moment_time": "meter_moment_time.html",
    "update_firmware": "update_firmware.html",
    "dout_settings": "dout_settings.html",
    "meter_routing": "meter_routing.html",
    "system_state": "system_state.html",
    "dout_routing": "dout_routing.html",
    "auth_settings": "auth_settings.html",

    #  Страницы - html

    # "meter_arch_month_cons.html": "meter_arch_month_cons.html",
    # "meter_answ_jrnl.html": "meter_answ_jrnl.html",
    # "meter_arch_day_cons.html": "meter_arch_day_cons.html",
    # "meter_settings_routing.html": "meter_settings_routing.html",
    # "meter_arch_hour.html": "meter_arch_hour.html",
    # "sim_settings.html": "sim_settings.html",
    # "time_settings.html": "time_settings.html",
    # "charge_station_state.html": "charge_station_state.html",
    # "meter_jrnl_din.html": "meter_jrnl_din.html",
    # "meter_arch_month.html": "meter_arch_month.html",
    # "meter_arch_energy.html": "meter_arch_energy.html",
    # "dout_state.html": "dout_state.html",
    # "meter_arch_day.html": "meter_arch_day.html",
    # "meter_table.html": "meter_table.html",
    # "meter_action_table.html": "meter_action_table.html",
    # "meter_moment_energy.html": "meter_moment_energy.html",
    # "meter_arch_din.html": "meter_arch_din.html",
    # "http_srv_settings.html": "http_srv_settings.html",
    # "meter_moment_quality.html": "meter_moment_quality.html",
    # "time_jrnl.html": "time_jrnl.html",
    # "charge_session_state.html": "charge_session_state.html",
    # "meter_arch_cons.html": "meter_arch_cons.html",
    # "mqtt_srv_settings.html": "mqtt_srv_settings.html",
    # "event_manager_settings.html": "event_manager_settings.html",
    # "arch_template.html": "arch_template.html",
    # "time.html": "time.html",
    # "sntp_settings.html": "sntp_settings.html",
    # "meter_arch_quality.html": "meter_arch_quality.html",
    # "meter_moment_din.html": "meter_moment_din.html",
    # "charge_process_state.html": "charge_process_state.html",
    # "time_info_routing.html": "time_info_routing.html",
    # "meter_moment_relay.html": "meter_moment_relay.html",
    # "meter_arch_journal.html": "meter_arch_journal.html",
    # "meter_template.html": "meter_template.html",
    # "main.html": "main.html",
    # "charge_station_table.html": "charge_station_table.html",
    # "modem_routing.html": "modem_routing.html",
    # "ip_settings.html": "ip_settings.html",
    # "meter_data_routing.html": "meter_data_routing.html",
    # "schdl_event_table.html": "schdl_event_table.html",
    # "os_diagn.html": "os_diagn.html",
    # "sync_actions_settings.html": "sync_actions_settings.html",
    # "message_routing.html": "message_routing.html",
    # "charge_station_routing.html": "charge_station_routing.html",
    # "net_routing.html": "net_routing.html",
    # "mqtt_routing.html": "mqtt_routing.html",
    # "uart_settings.html": "uart_settings.html",
    # "meter_arch_config.html": "meter_arch_config.html",
    # "meter_moment_time.html": "meter_moment_time.html",
    # "update_firmware.html": "update_firmware.html",
    # "dout_settings.html": "dout_settings.html",
    # "meter_routing.html": "meter_routing.html",
    # "system_state.html": "system_state.html",
    # "dout_routing.html": "dout_routing.html",
    # "auth_settings.html": "auth_settings.html",
}


def FrontendStaticFileManager(url):
    """
    Менеджер работы со страницами фронтенда
    :return:
    """
    # сам файл контента что возвращаем
    html_path = """"""

    # обозначаем путь до папки с пакетом нашего фронтенда
    frontend_path = "/Users/trigun-d/PycharmProjects/pythonFlask/frontend/json-frontend/"

    # получаем HTML страницу по данному URL
    html_name_file = handlers_static_file.get(url)
    # если по данному URL нашли файл - читаем его
    if html_name_file:
        # первое - делаем полный путь
        html_path = frontend_path + html_name_file

    # возвращаем контент
    return html_path


def FrontendJavascriptManager(url):
    """
    Менеджер работы со страницами фронтенда
    :return:
    """
    # сам файл контента что возвращаем
    javascript_path = """"""

    # обозначаем путь до папки с пакетом нашего фронтенда
    frontend_path = "/Users/trigun-d/PycharmProjects/pythonFlask/frontend/json-frontend/"

    # получаем HTML страницу по данному URL
    html_name_file = handlers_javascript_file.get(url)
    # если по данному URL нашли файл - читаем его
    if html_name_file:
        # первое - делаем полный путь
        javascript_path = frontend_path + html_name_file

    print(javascript_path)
    # возвращаем контент
    return javascript_path


def FrontendManager(url):
    """
    Менеджер работы со страницами фронтенда
    :return:
    """
    # сам файл контента что возвращаем
    html_content = ""

    # обозначаем путь до папки с пакетом нашего фронтенда
    frontend_path = "/Users/trigun-d/PycharmProjects/pythonFlask/frontend/json-frontend/"

    # получаем HTML страницу по данному URL
    html_name_file = handlers_frontend.get(url)
    # если по данному URL нашли файл - читаем его
    if html_name_file:
        # первое - делаем полный путь
        html_path = frontend_path + html_name_file
        # открываем файл
        html_file = open(html_path)
        # читаем его
        html_content = html_file.read()

    # возвращаем контент
    return html_content
# ======


from fastapi import APIRouter
from fastapi.responses import HTMLResponse, FileResponse


class JSONFrontend:
    """
    Базовый класс который работает с роутингом HTML страниц
    """

    def __init__(self):

        # Объявляем класс роутинга
        self.router = APIRouter()

        # Добавляем роутинг HTML страниц
        urls = list(handlers_frontend.keys())
        for url in urls:
            self.url = url

            self.router.add_api_route("/" + url, self.HTML_Page, methods=["GET"])

        self.router.add_api_route("/", self.HTML_Page_Main , methods=["GET"])

        # # Добавляем роутинг для файлов
        # urls = list(handlers_javascript_file.keys())
        # for url in urls:
        #     self.url = url
        #     self.router.add_api_route("/" + url, self.Javascript_response, methods=["GET"])

    # def Static_File_to_Page(self):
    #     """
    #     :param HTML_content:
    #     :return:
    #     """
    #     file_path = FrontendStaticFileManager(self.url)
    #
    #     return FileResponse(path=file_path, status_code=200, media_type="image/x-icon")

    # def Javascript_response(self):
    #     """
    #     :param HTML_content:
    #     :return:
    #     """
    #     file_path = FrontendJavascriptManager(self.url)
    #
    #     return FileResponse(path=file_path, status_code=200 , media_type="application/javascript")

    def HTML_Page_Main(self):
        """
        :param HTML_content:
        :return:
        """
        html_content = FrontendManager('main')

        return HTMLResponse(content=html_content, status_code=200 , media_type="text/html")


    def HTML_Page(self):
        """
        :param HTML_content:
        :return:
        """
        html_content = FrontendManager(self.url)

        return HTMLResponse(content=html_content, status_code=200 , media_type="text/html")
